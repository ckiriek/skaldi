# üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ê–£–î–ò–¢ –°–ò–°–¢–ï–ú–´ SKALDI
**–î–∞—Ç–∞:** 24 –Ω–æ—è–±—Ä—è 2025

---

## –í–ê–®–ï –í–ò–î–ï–ù–ò–ï vs –†–ï–ê–õ–¨–ù–û–°–¢–¨

### ‚úÖ –í–∞—à–µ –≤–∏–¥–µ–Ω–∏–µ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ):
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –ú–ù–ù + –¥–∏–∑–∞–π–Ω ‚Üí Enrichment ‚Üí Knowledge Graph ‚Üí 
‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (—Å —É—á–µ—Ç–æ–º –≥—Ä–∞—Ñ–∞ + –≥–∞–π–¥–ª–∞–π–Ω–æ–≤ + —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤) ‚Üí 
‚Üí –í–∞–ª–∏–¥–∞—Ü–∏—è ‚Üí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Üí –°–∫–∞—á–∏–≤–∞–Ω–∏–µ
```

### ‚ùå –†–µ–∞–ª—å–Ω–æ—Å—Ç—å (—Å–ª–æ–º–∞–Ω–æ):
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –ú–ù–ù + –¥–∏–∑–∞–π–Ω ‚Üí Enrichment (—Ä–∞–±–æ—Ç–∞–µ—Ç) ‚Üí 
‚Üí Knowledge Graph (—Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è) ‚Üí 
‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è (–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥—Ä–∞—Ñ, –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç enrichment, RAG –ø—É—Å—Ç–æ–π) ‚Üí 
‚Üí –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –®–ê–ë–õ–û–ù–´ –≤–º–µ—Å—Ç–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ ‚Üí 
‚Üí –í–∞–ª–∏–¥–∞—Ü–∏—è (–Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)
```

---

## –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ ‚úÖ

1. **Enrichment API** - —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ ClinicalTrials.gov, OpenFDA, PubMed
2. **Knowledge Graph Builder** - —Å—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ –∏–∑ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
3. **Document Orchestrator** - –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è** - QC –∏ Consistency validators
5. **Clinical Reference** - 14 —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏–º–µ—Ä–æ–≤

---

## –ß–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢ ‚ùå

### 1. RAG –°–ò–°–¢–ï–ú–ê (–ö–†–ò–¢–ò–ß–ù–û)
```sql
-- –¢–∞–±–ª–∏—Ü—ã –ü–£–°–¢–´–ï
SELECT COUNT(*) FROM drug_reference_chunks;  -- 0 ‚ùå
```
**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ:** AI –Ω–µ –≤–∏–¥–∏—Ç –ø—Ä–∏–º–µ—Ä—ã –∏–∑ clinical_reference/

### 2. KNOWLEDGE GRAPH –ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø
```typescript
// Knowledge Graph —Å—Ç—Ä–æ–∏—Ç—Å—è, –Ω–æ:
// ‚ùå –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
// ‚ùå –ù–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
// ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö
```

### 3. ENRICHMENT –î–ê–ù–ù–´–ï –ù–ï –ò–°–ü–û–õ–¨–ó–£–Æ–¢–°–Ø
```typescript
// external_evidence –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è, –Ω–æ:
// ‚ùå –ù–µ —á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
// ‚ùå –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
```

### 4. –ü–†–û–ú–ü–¢–´ –ì–ï–ù–ï–†–ò–†–£–Æ–¢ –®–ê–ë–õ–û–ù–´
```json
// –ü—Ä–æ–±–ª–µ–º–∞: –ø—Ä–æ–º–ø—Ç—ã —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω—ã–µ
// AI –¥—É–º–∞–µ—Ç: "–û–Ω–∏ —Ö–æ—Ç—è—Ç —à–∞–±–ª–æ–Ω"
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "## Title Page Template [Insert INN]"
```

### 5. DESIGN BUILDER –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù
```
// –ü—É—Ç—å 2 (—Ç–æ–ª—å–∫–æ –ú–ù–ù) –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```

---

## –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –†–∞–∑–æ—Ä–≤–∞–Ω–Ω—ã–π Data Flow
```
Enrichment ‚Üí external_evidence (–ë–î)
              ‚Üì (–ù–ï–¢ –°–í–Ø–ó–ò ‚ùå)
Knowledge Graph ‚Üí –ø–∞–º—è—Ç—å (–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è)
              ‚Üì (–ù–ï–¢ –°–í–Ø–ó–ò ‚ùå)
Generation ‚Üí –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∏—á–µ–≥–æ
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ü—Ä–æ–º–ø—Ç—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç
```typescript
// –°–µ–π—á–∞—Å:
constructPrompt(template, context)
// context = {compoundName: "Sitagliptin"}

// –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
constructPrompt(template, context, knowledgeGraph, ragRefs)
// + –¥–∞–Ω–Ω—ã–µ –∏–∑ KG
// + —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã –∏–∑ clinical_reference/
// + –¥–∞–Ω–Ω—ã–µ –∏–∑ enrichment
```

---

## –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (–ü–†–ò–û–†–ò–¢–ï–¢–´)

### üî• –ö–†–ò–¢–ò–ß–ù–û (—Å–¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å):

#### 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å RAG (30 –º–∏–Ω)
```bash
npm run load-references
```

#### 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã (1 —á–∞—Å)
- –î–æ–±–∞–≤–∏—Ç—å "WRITE ABOUT ACTUAL DRUG, NOT TEMPLATE"
- –£–ø—Ä–æ—Å—Ç–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- –£–±—Ä–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

#### 3. –°–æ—Ö—Ä–∞–Ω—è—Ç—å Knowledge Graph (1 —á–∞—Å)
```sql
CREATE TABLE knowledge_graphs (
  project_id UUID PRIMARY KEY,
  snapshot JSONB
);
```

#### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å KG –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (2 —á–∞—Å–∞)
```typescript
// document-orchestrator.ts
const kg = await fetchKnowledgeGraph(projectId)
const context = buildContext(project, kg)  // ‚Üê –¥–æ–±–∞–≤–∏—Ç—å KG
```

### üü° –í–ê–ñ–ù–û (—Å–ª–µ–¥—É—é—â–∞—è —Å–µ—Å—Å–∏—è):

#### 5. Design Builder (3 —á–∞—Å–∞)
- –°–æ–∑–¥–∞—Ç—å DesignBuilder –∫–ª–∞—Å—Å
- API /api/design/suggest
- UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

#### 6. –£–ª—É—á—à–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é (2 —á–∞—Å–∞)
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ enrichment
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å NCT –Ω–æ–º–µ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å FDA references

---

## –ò–¢–û–ì–û

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** 30% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç  
**–ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ —Å–≤—è–∑–∞–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π  
**–í—Ä–µ–º—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** 8-10 —á–∞—Å–æ–≤  

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å:**
1. RAG (30 –º–∏–Ω) ‚Üê –°–ï–ô–ß–ê–°
2. –ü—Ä–æ–º–ø—Ç—ã (1 —á–∞—Å) ‚Üê –°–ï–ô–ß–ê–°  
3. KG –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (3 —á–∞—Å–∞) ‚Üê –°–ï–ì–û–î–ù–Ø
4. Design Builder (3 —á–∞—Å–∞) ‚Üê –ó–ê–í–¢–†–ê
5. –í–∞–ª–∏–¥–∞—Ü–∏—è (2 —á–∞—Å–∞) ‚Üê –ó–ê–í–¢–†–ê

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –≤—ã –∑–∞–¥—É–º–∞–ª–∏.
