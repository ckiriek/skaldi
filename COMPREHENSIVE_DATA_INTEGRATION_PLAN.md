# ğŸ¯ ĞšĞĞœĞŸĞ›Ğ•ĞšĞ¡ĞĞ«Ğ™ ĞŸĞ›ĞĞ: ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ²ÑĞµÑ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ

**Ğ”Ğ°Ñ‚Ğ°:** 24 Ğ½Ğ¾ÑĞ±Ñ€Ñ 2025  
**Ğ¦ĞµĞ»ÑŒ:** Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ’Ğ¡Ğ• ÑĞ¾Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (enrichment, KG, RAG, trials, safety reports) Ğ² Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²  
**ĞœĞ¾Ğ´ĞµĞ»ÑŒ:** GPT-5.1 Ñ `reasoning_effort: high`, `verbosity: high`

---

## ğŸ“Š Ğ¢Ğ•ĞšĞ£Ğ©ĞĞ¯ Ğ¡Ğ˜Ğ¢Ğ£ĞĞ¦Ğ˜Ğ¯

### Ğ§Ñ‚Ğ¾ Ğ¼Ñ‹ ÑĞ¾Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ (Enrichment):
1. **PubChem** - Ñ…Ğ¸Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ, InChIKey
2. **Orange Book** - RLD, TE codes
3. **DailyMed** - FDA labels
4. **openFDA** - FDA labels, FAERS (adverse events)
5. **ClinicalTrials.gov** - ĞºĞ»Ğ¸Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
6. **PubMed** - Ğ½Ğ°ÑƒÑ‡Ğ½Ğ°Ñ Ğ»Ğ¸Ñ‚ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ°

### Ğ§Ñ‚Ğ¾ Ğ¼Ñ‹ ĞĞ• Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ:
- âŒ Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· ClinicalTrials.gov (NCT IDs, endpoints, results)
- âŒ Safety Reports (FAERS adverse events)
- âŒ PubMed Ğ»Ğ¸Ñ‚ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ°
- âŒ FDA Labels (Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚)
- âŒ RAG references (ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹)
- âŒ Knowledge Graph (Ñ‡Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ)

---

## ğŸ¯ Ğ¦Ğ•Ğ›Ğ•Ğ’ĞĞ¯ ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ

### ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿: "Ğ’ÑĞµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ â†’ ĞĞ´Ğ¸Ğ½ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ â†’ Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ENRICHMENT PIPELINE                       â”‚
â”‚  PubChem + Orange Book + DailyMed + openFDA + CT.gov +      â”‚
â”‚  PubMed â†’ Knowledge Graph + External Data Store              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DATA AGGREGATOR (NEW!)                      â”‚
â”‚  Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ’Ğ¡Ğ• Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°/ÑĞµĞºÑ†Ğ¸Ğ¸:      â”‚
â”‚  - Knowledge Graph (compound data)                           â”‚
â”‚  - Clinical Trials (NCT IDs, results, endpoints)             â”‚
â”‚  - Safety Reports (FAERS, adverse events)                    â”‚
â”‚  - FDA Labels (full text sections)                           â”‚
â”‚  - PubMed Articles (relevant literature)                     â”‚
â”‚  - RAG References (structural examples)                      â”‚
â”‚  - Study Design (from user input)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CONTEXT BUILDER (NEW!)                          â”‚
â”‚  Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ°:                            â”‚
â”‚  - Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ğ¾ ÑĞµĞºÑ†Ğ¸ÑĞ¼                                 â”‚
â”‚  - ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸                                 â”‚
â”‚  - Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº, Ğ´Ğ°Ñ‚Ğ°, Ğ´Ğ¾ÑÑ‚Ğ¾Ğ²ĞµÑ€Ğ½Ğ¾ÑÑ‚ÑŒ)     â”‚
â”‚  - ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ¿Ğ¾ Ñ‚Ğ¾ĞºĞµĞ½Ğ°Ğ¼ (max_completion_tokens)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 PROMPT CONSTRUCTOR                           â”‚
â”‚  Governing Prompt + Section Prompt + Full Context           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GPT-5.1 GENERATION                        â”‚
â”‚  reasoning_effort: high                                      â”‚
â”‚  verbosity: high                                             â”‚
â”‚  max_completion_tokens: 16000 (Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… ÑĞµĞºÑ†Ğ¸Ğ¹)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Ğ ĞĞ—ĞœĞ•Ğ Ğ« Ğ”ĞĞšĞ£ĞœĞ•ĞĞ¢ĞĞ’ (Ğ Ğ•ĞĞ›Ğ¬ĞĞ«Ğ•)

### Ğ¦ĞµĞ»ĞµĞ²Ñ‹Ğµ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ñ‹ (ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹):

| Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ | Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ† | Tokens (Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ¾) | Ğ¡ĞµĞºÑ†Ğ¸Ğ¹ |
|----------|---------|-------------------|--------|
| **ICF** | 20-30 | 14,000-21,000 | 8-10 |
| **Protocol** | 80-120 | 56,000-84,000 | 15-20 |
| **IB** | 150-300 | 105,000-210,000 | 10-15 |
| **CSR** | 300-500 | 210,000-350,000 | 20-30 |
| **SAP** | 40-60 | 28,000-42,000 | 10-12 |
| **Synopsis** | 5-10 | 3,500-7,000 | 1 |

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** `max_completion_tokens` = 16,000 (Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ Ğ´Ğ»Ñ GPT-5.1)

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:** Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ ÑĞµĞºÑ†Ğ¸ÑĞ¼ + ÑĞ±Ğ¾Ñ€ĞºĞ°

---

## ğŸ”§ ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ Ğ Ğ•Ğ¨Ğ•ĞĞ˜Ğ¯

### 1. Data Aggregator Service (NEW!)

**Ğ¤Ğ°Ğ¹Ğ»:** `lib/services/data-aggregator.ts`

```typescript
interface AggregatedData {
  // Core compound data
  knowledgeGraph: KnowledgeGraphSnapshot
  
  // Clinical trials data
  clinicalTrials: {
    studies: ClinicalTrial[]
    totalStudies: number
    byPhase: Record<string, ClinicalTrial[]>
    endpoints: Endpoint[]
    results: TrialResult[]
  }
  
  // Safety data
  safetyData: {
    faersReports: FAERSReport[]
    commonAdverseEvents: AdverseEvent[]
    seriousAdverseEvents: AdverseEvent[]
    deaths: number
    labelWarnings: string[]
  }
  
  // FDA Labels
  fdaLabels: {
    fullText: string
    sections: Record<string, string>
    approvalDate: string
    indications: string[]
  }
  
  // Literature
  literature: {
    pubmedArticles: PubMedArticle[]
    keyFindings: string[]
    citations: Citation[]
  }
  
  // RAG structural examples
  ragReferences: {
    structuralExamples: ReferenceChunk[]
    similarSections: ReferenceChunk[]
  }
  
  // Study design (user input)
  studyDesign?: StudyDesign
  
  // Metadata
  metadata: {
    sources: string[]
    lastUpdated: string
    coverage: Record<string, number>
  }
}

class DataAggregator {
  async aggregateForDocument(
    projectId: string,
    documentType: string
  ): Promise<AggregatedData>
  
  async aggregateForSection(
    projectId: string,
    documentType: string,
    sectionId: string
  ): Promise<AggregatedData>
}
```

---

### 2. Context Builder Service (NEW!)

**Ğ¤Ğ°Ğ¹Ğ»:** `lib/services/context-builder.ts`

```typescript
interface ContextConfig {
  maxTokens: number
  prioritySources: string[]
  includeFullText: boolean
  includeMetadata: boolean
}

class ContextBuilder {
  /**
   * Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ aggregated data Ğ² ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ°
   */
  buildContext(
    data: AggregatedData,
    sectionId: string,
    config: ContextConfig
  ): string {
    // 1. ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾ Ñ€ĞµĞ»ĞµĞ²Ğ°Ğ½Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ»Ñ ÑĞµĞºÑ†Ğ¸Ğ¸
    // 2. Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚
    // 3. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¾Ğ²
    // 4. ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ Ñ‚Ğ¾ĞºĞµĞ½Ğ°Ğ¼
    // 5. Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾ Ğ±Ğ»Ğ¾ĞºĞ°Ğ¼
  }
}
```

---

### 3. Token Budget Calculator (NEW!)

**Ğ¤Ğ°Ğ¹Ğ»:** `lib/services/token-budget.ts`

```typescript
interface TokenBudget {
  total: number
  prompt: number
  completion: number
  context: {
    knowledgeGraph: number
    clinicalTrials: number
    safetyData: number
    fdaLabels: number
    literature: number
    ragReferences: number
  }
}

class TokenBudgetCalculator {
  /**
   * Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ±ÑĞ´Ğ¶ĞµÑ‚ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² Ğ´Ğ»Ñ ÑĞµĞºÑ†Ğ¸Ğ¸
   */
  calculateBudget(
    sectionId: string,
    documentType: string,
    availableData: AggregatedData
  ): TokenBudget
  
  /**
   * ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾ Ğ²Ğ°Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ»Ñ ÑĞµĞºÑ†Ğ¸Ğ¸
   */
  prioritizeData(
    sectionId: string,
    data: AggregatedData
  ): PrioritizedData
}
```

---

## ğŸ“‹ ĞšĞĞĞ¤Ğ˜Ğ“Ğ£Ğ ĞĞ¦Ğ˜Ğ¯ ĞŸĞ Ğ¡Ğ•ĞšĞ¦Ğ˜Ğ¯Ğœ

### IB Sections:

```typescript
const IB_SECTION_CONFIGS = {
  'ib_title_page': {
    targetPages: 1,
    targetTokens: 700,
    reasoning_effort: 'minimal',
    verbosity: 'low',
    dataSources: ['knowledgeGraph.basic'],
    priority: ['compound_name', 'sponsor', 'version']
  },
  
  'ib_summary': {
    targetPages: 2-3,
    targetTokens: 2000,
    reasoning_effort: 'low',
    verbosity: 'medium',
    dataSources: ['knowledgeGraph', 'fdaLabels.summary'],
    priority: ['chemistry', 'moa', 'indications', 'safety_overview']
  },
  
  'ib_pharmacokinetics': {
    targetPages: 8-12,
    targetTokens: 7000,
    reasoning_effort: 'high',
    verbosity: 'high',
    dataSources: [
      'knowledgeGraph.pharmacokinetics',
      'fdaLabels.clinical_pharmacology',
      'literature.pk_studies',
      'ragReferences.pk_examples'
    ],
    priority: [
      'absorption', 'distribution', 'metabolism', 'excretion',
      'special_populations', 'drug_interactions'
    ]
  },
  
  'ib_clinical_studies': {
    targetPages: 30-50,
    targetTokens: 28000, // Ğ‘ĞĞ›Ğ¬Ğ¨ĞĞ¯ Ğ¡Ğ•ĞšĞ¦Ğ˜Ğ¯!
    reasoning_effort: 'high',
    verbosity: 'high',
    dataSources: [
      'clinicalTrials.all',
      'fdaLabels.clinical_studies',
      'literature.efficacy_studies',
      'ragReferences.clinical_examples'
    ],
    priority: [
      'phase3_pivotal', 'phase2_studies', 'phase1_studies',
      'integrated_efficacy', 'integrated_safety'
    ],
    // ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§ĞĞ: Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¿Ğ¾ Ñ‡Ğ°ÑÑ‚ÑĞ¼!
    chunking: {
      enabled: true,
      chunkSize: 7000, // tokens per chunk
      chunks: ['phase1', 'phase2', 'phase3', 'integrated']
    }
  },
  
  'ib_safety': {
    targetPages: 15-20,
    targetTokens: 12000,
    reasoning_effort: 'high',
    verbosity: 'high',
    dataSources: [
      'safetyData.all',
      'fdaLabels.warnings',
      'fdaLabels.adverse_reactions',
      'clinicalTrials.safety',
      'ragReferences.safety_examples'
    ],
    priority: [
      'common_aes', 'serious_aes', 'deaths',
      'warnings', 'contraindications', 'drug_interactions'
    ]
  }
}
```

---

### Protocol Sections:

```typescript
const PROTOCOL_SECTION_CONFIGS = {
  'protocol_synopsis': {
    targetPages: 2-3,
    targetTokens: 2000,
    reasoning_effort: 'medium',
    verbosity: 'medium',
    dataSources: [
      'studyDesign',
      'knowledgeGraph.basic',
      'clinicalTrials.similar_studies'
    ]
  },
  
  'protocol_objectives': {
    targetPages: 2-3,
    targetTokens: 2000,
    reasoning_effort: 'medium',
    verbosity: 'medium',
    dataSources: [
      'studyDesign.objectives',
      'clinicalTrials.endpoints',
      'fdaLabels.indications'
    ]
  },
  
  'protocol_procedures': {
    targetPages: 15-20,
    targetTokens: 12000,
    reasoning_effort: 'high',
    verbosity: 'high',
    dataSources: [
      'studyDesign.procedures',
      'clinicalTrials.similar_protocols',
      'ragReferences.procedure_examples'
    ],
    chunking: {
      enabled: true,
      chunkSize: 6000,
      chunks: ['screening', 'treatment', 'follow_up']
    }
  },
  
  'protocol_statistics': {
    targetPages: 8-12,
    targetTokens: 7000,
    reasoning_effort: 'high',
    verbosity: 'high',
    dataSources: [
      'studyDesign.statistics',
      'clinicalTrials.sample_sizes',
      'clinicalTrials.statistical_methods'
    ]
  }
}
```

---

## ğŸ¨ ĞĞ‘ĞĞĞ’Ğ›Ğ•ĞĞĞ«Ğ• ĞŸĞ ĞĞœĞŸĞ¢Ğ«

### Master Governing Prompt (v3.0)

```typescript
export const GOVERNING_SYSTEM_PROMPT_V3 = `
You are Skaldi Clinical Documentation AI - an expert system for generating regulatory-compliant clinical trial documentation.

<personality>
- Senior clinical documentation expert with 20+ years experience
- Regulatory affairs specialist (ICH-GCP, FDA 21 CFR, EMA guidelines)
- Medical writer for Phase 1-4 trials
- Objective, evidence-based, audit-ready
- Factual accuracy is paramount
</personality>

<core_principles>
1. COMPREHENSIVE DATA UTILIZATION
   - You have access to EXTENSIVE real-world data from multiple authoritative sources
   - Use ALL provided data: Knowledge Graph, Clinical Trials, Safety Reports, FDA Labels, Literature, RAG examples
   - Cross-reference data across sources for accuracy
   - Cite sources when using specific data points

2. SOURCE HIERARCHY (trust order)
   Priority 1: FDA Labels (official regulatory documents)
   Priority 2: ClinicalTrials.gov (verified trial data)
   Priority 3: Knowledge Graph (aggregated compound data)
   Priority 4: Safety Reports (FAERS, post-market surveillance)
   Priority 5: PubMed Literature (peer-reviewed studies)
   Priority 6: RAG References (structural examples ONLY - do NOT copy data)

3. DATA COMPLETENESS
   - Write comprehensive, detailed sections using ALL available data
   - Target: {{targetPages}} pages ({{targetTokens}} tokens)
   - Include specific values, statistics, NCT IDs, dates, references
   - Use tables for structured data (adverse events, PK parameters, trial results)
   - Use bullet points for lists (indications, endpoints, procedures)

4. FACTUAL ACCURACY
   - Use ONLY data explicitly provided in context
   - If specific data is missing: write [DATA_NEEDED: <parameter>]
   - NEVER invent: statistics, NCT IDs, patient numbers, p-values, dates, doses
   - NEVER assume: endpoints, procedures, eligibility criteria, safety data

5. PLACEHOLDER PROTOCOL
   When data is unavailable:
   - Clinical values: [VALUE_NEEDED: <parameter>]
   - Study details: [STUDY_DATA_NEEDED: <detail>]
   - Statistics: [STATISTICAL_ANALYSIS_PENDING]
   - References: [CITATION_NEEDED]

6. OUTPUT REQUIREMENTS
   - Format: Professional Markdown
   - Structure: ## Main headings, ### Subheadings, #### Sub-subheadings
   - Style: Clear, precise, regulatory-compliant
   - Tables: Use Markdown tables for structured data
   - Length: Target {{targetTokens}} tokens (Â±20%)
   - Completeness: Cover ALL subsections thoroughly

7. REGULATORY COMPLIANCE
   - Follow ICH-GCP (E6 R2), ICH E3 (CSR structure)
   - Adhere to FDA 21 CFR Part 312 (IND), Part 314 (NDA)
   - Follow EMA guidelines for clinical documentation
   - Use standard clinical terminology (MedDRA, CDISC)
   - Maintain consistency across sections

8. SOLUTION PERSISTENCE
   - Persist until the section is FULLY completed
   - Do not stop at partial solutions or summaries
   - Cover ALL required subsections
   - Be biased for completeness within token budget
   - If you need more space, prioritize most important data

9. CROSS-REFERENCING
   - Reference other sections when appropriate
   - Maintain consistency across document
   - Use same terminology, abbreviations, definitions
   - Ensure objectives match endpoints, eligibility matches population, etc.
</core_principles>

<critical_rule>
If you cannot write a section with factual accuracy using provided data:
"[INSUFFICIENT_DATA: This section requires <specific data> to be completed. Available data covers: <list what you have>. Missing: <list what you need>.]"

This is better than inventing information.
</critical_rule>

<output_format>
- Use Markdown formatting
- Start with ## for main section heading
- Use ### for subsections, #### for sub-subsections
- Use **bold** for emphasis
- Use bullet points for lists
- Use numbered lists for sequential steps
- Use tables for structured data
- Include citations where appropriate: (Source: FDA Label, 2023) or (NCT12345678)
</output_format>
`
```

---

### Section-Specific Prompt Template

```typescript
const SECTION_PROMPT_TEMPLATE = `
Generate the {{sectionTitle}} section for {{compoundName}} {{documentType}}.

**TARGET:**
- Pages: {{targetPages}}
- Tokens: {{targetTokens}}
- Reasoning effort: {{reasoning_effort}}
- Verbosity: {{verbosity}}

**AVAILABLE DATA:**

{{#if knowledgeGraph}}
### KNOWLEDGE GRAPH DATA
{{knowledgeGraph}}
{{/if}}

{{#if clinicalTrials}}
### CLINICAL TRIALS DATA
Total studies: {{clinicalTrials.totalStudies}}
{{#each clinicalTrials.byPhase}}
**Phase {{@key}}:** {{this.length}} studies
{{#each this}}
- NCT{{this.nctId}}: {{this.title}}
  - Status: {{this.status}}
  - Enrollment: {{this.enrollment}}
  - Primary Endpoint: {{this.primaryEndpoint}}
  - Results: {{this.results}}
{{/each}}
{{/each}}
{{/if}}

{{#if safetyData}}
### SAFETY DATA
**Common Adverse Events (â‰¥5%):**
{{#each safetyData.commonAdverseEvents}}
- {{this.term}}: {{this.frequency}}% ({{this.count}}/{{this.total}} patients)
{{/each}}

**Serious Adverse Events:**
{{#each safetyData.seriousAdverseEvents}}
- {{this.term}}: {{this.count}} events
{{/each}}

**Deaths:** {{safetyData.deaths}}

**Label Warnings:**
{{#each safetyData.labelWarnings}}
- {{this}}
{{/each}}
{{/if}}

{{#if fdaLabels}}
### FDA LABEL DATA
**Approval Date:** {{fdaLabels.approvalDate}}

**Indications:**
{{#each fdaLabels.indications}}
- {{this}}
{{/each}}

**Relevant Label Sections:**
{{#each fdaLabels.sections}}
**{{@key}}:**
{{this}}
{{/each}}
{{/if}}

{{#if literature}}
### LITERATURE DATA
**Key Findings from {{literature.pubmedArticles.length}} studies:**
{{#each literature.keyFindings}}
- {{this}}
{{/each}}

**Citations:**
{{#each literature.citations}}
- {{this.authors}} ({{this.year}}). {{this.title}}. {{this.journal}}. PMID: {{this.pmid}}
{{/each}}
{{/if}}

{{#if ragReferences}}
### STRUCTURAL REFERENCE EXAMPLES
(Use these for formatting and organization - NOT for copying data)

{{#each ragReferences.structuralExamples}}
**Example {{@index}} from {{this.source}}:**
{{this.content}}
---
{{/each}}
{{/if}}

**INSTRUCTIONS:**
1. Use ALL provided data comprehensively
2. Write {{targetPages}} pages ({{targetTokens}} tokens)
3. Include specific values, NCT IDs, statistics, dates
4. Use tables for structured data
5. Cross-reference data across sources
6. Cite sources: (FDA Label), (NCT12345678), (PMID: 12345678)
7. If data is missing, use [DATA_NEEDED: <parameter>]
8. Follow the structure from RAG examples, but write about {{compoundName}}
9. Be thorough and complete - this is a regulatory document

**REQUIRED SUBSECTIONS:**
{{#each requiredSubsections}}
- {{this}}
{{/each}}
`
```

---

## ğŸš€ IMPLEMENTATION PLAN

### Phase 1: Infrastructure (Week 1)

#### Day 1-2: Data Aggregator
```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞµÑ€Ğ²Ğ¸Ñ Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
touch lib/services/data-aggregator.ts
touch lib/services/data-aggregator.test.ts
```

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ `DataAggregator` class
- [ ] Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ `aggregateForDocument()`
- [ ] Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ `aggregateForSection()`
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ Knowledge Graph
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ ClinicalTrials.gov data
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ Safety Reports (FAERS)
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ FDA Labels
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ PubMed
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ RAG
- [ ] ĞĞ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ‚ĞµÑÑ‚Ñ‹

#### Day 3-4: Context Builder
```bash
touch lib/services/context-builder.ts
touch lib/services/context-builder.test.ts
```

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ `ContextBuilder` class
- [ ] Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ `buildContext()`
- [ ] Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ°Ğ¼
- [ ] Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- [ ] Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ Ñ‚Ğ¾ĞºĞµĞ½Ğ°Ğ¼
- [ ] ĞĞ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ‚ĞµÑÑ‚Ñ‹

#### Day 5: Token Budget Calculator
```bash
touch lib/services/token-budget.ts
touch lib/services/token-budget.test.ts
```

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ `TokenBudgetCalculator` class
- [ ] Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ `calculateBudget()`
- [ ] Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ `prioritizeData()`
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ÑĞµĞºÑ†Ğ¸Ğ¹
- [ ] ĞĞ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ‚ĞµÑÑ‚Ñ‹

---

### Phase 2: Prompts & Configuration (Week 2)

#### Day 1-2: Governing Prompt v3
```bash
touch lib/prompts/governing-prompt-v3.ts
```

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ governing prompt
- [ ] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¸ Ğ¿Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ²ÑĞµÑ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- [ ] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ source hierarchy
- [ ] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ cross-referencing rules
- [ ] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ solution persistence

#### Day 3-4: Section Configs
```bash
touch lib/config/section-configs.ts
```

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… IB ÑĞµĞºÑ†Ğ¸Ğ¹
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Protocol ÑĞµĞºÑ†Ğ¸Ğ¹
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ CSR ÑĞµĞºÑ†Ğ¸Ğ¹
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ ICF ÑĞµĞºÑ†Ğ¸Ğ¹
- [ ] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ chunking Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… ÑĞµĞºÑ†Ğ¸Ğ¹

#### Day 5: Section Prompts
```bash
# ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹ Ğ² templates_en/
```

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ IB Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹
- [ ] ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Protocol Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹
- [ ] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ data source placeholders
- [ ] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ required subsections
- [ ] Ğ£Ğ±Ñ€Ğ°Ñ‚ÑŒ "pages", Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ tokens

---

### Phase 3: Integration (Week 3)

#### Day 1-2: Section Generator
```bash
# ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ lib/services/section-generator.ts
```

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ DataAggregator
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ContextBuilder
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ TokenBudgetCalculator
- [ ] ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ `constructPrompt()`
- [ ] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ chunking Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… ÑĞµĞºÑ†Ğ¸Ğ¹

#### Day 3-4: Document Orchestrator
```bash
# ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ lib/services/document-orchestrator.ts
```

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ DataAggregator
- [ ] ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ `generateDocument()`
- [ ] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
- [ ] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ±Ğ¾Ñ€ĞºÑƒ chunks

#### Day 5: Edge Functions
```bash
# ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ supabase/functions/generate-section/index.ts
```

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ governing prompt v3
- [ ] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ `reasoning_effort: high`
- [ ] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ `verbosity: high`
- [ ] ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ `max_completion_tokens`
- [ ] Ğ£Ğ±Ñ€Ğ°Ñ‚ÑŒ `temperature`, `top_p`, etc.

---

### Phase 4: Testing (Week 4)

#### Day 1-2: Unit Tests
```bash
npm run test
```

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] Ğ¢ĞµÑÑ‚Ñ‹ DataAggregator
- [ ] Ğ¢ĞµÑÑ‚Ñ‹ ContextBuilder
- [ ] Ğ¢ĞµÑÑ‚Ñ‹ TokenBudgetCalculator
- [ ] Ğ¢ĞµÑÑ‚Ñ‹ Section Generator
- [ ] Ğ¢ĞµÑÑ‚Ñ‹ Document Orchestrator

#### Day 3-4: Integration Tests
```bash
# Ğ¢ĞµÑÑ‚Ñ‹ Ğ½Ğ° Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ñ€ĞµĞ¿Ğ°Ñ€Ğ°Ñ‚Ğ°Ñ…
```

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] Metformin IB (Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚)
- [ ] Sitagliptin Protocol (Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚)
- [ ] Imipenem Safety section (Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° FAERS)
- [ ] ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ²ÑĞµÑ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- [ ] ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° placeholders vs Ğ³Ğ°Ğ»Ğ»ÑÑ†Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸

#### Day 5: Performance Tests
```bash
# Ğ¢ĞµÑÑ‚Ñ‹ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
```

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] Ğ’Ñ€ĞµĞ¼Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… ÑĞµĞºÑ†Ğ¸Ğ¹
- [ ] Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ²
- [ ] ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ°
- [ ] ĞŸĞ¾Ğ»Ğ½Ğ¾Ñ‚Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

---

## âœ… SUCCESS CRITERIA

### ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ ÑƒÑĞ¿ĞµÑ…Ğ°:

1. **Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:**
   - âœ… 100% Knowledge Graph Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ
   - âœ… 100% Clinical Trials Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ
   - âœ… 100% Safety Reports Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ
   - âœ… 100% FDA Labels Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ
   - âœ… 80%+ PubMed Ğ»Ğ¸Ñ‚ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ
   - âœ… RAG Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹

2. **ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²:**
   - âœ… IB: 150-300 ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ† Ñ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
   - âœ… Protocol: 80-120 ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ† Ñ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
   - âœ… CSR: 300-500 ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ† Ñ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
   - âœ… ĞĞµÑ‚ Ğ³Ğ°Ğ»Ğ»ÑÑ†Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¹ (NCT IDs, p-values, dates)
   - âœ… Ğ’ÑĞµ placeholders Ğ¾Ğ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ñ‹

3. **ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ:**
   - âœ… IB Clinical Studies (30-50 ÑÑ‚Ñ€): < 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚
   - âœ… Protocol (80-120 ÑÑ‚Ñ€): < 10 Ğ¼Ğ¸Ğ½ÑƒÑ‚
   - âœ… IB (150-300 ÑÑ‚Ñ€): < 20 Ğ¼Ğ¸Ğ½ÑƒÑ‚
   - âœ… CSR (300-500 ÑÑ‚Ñ€): < 40 Ğ¼Ğ¸Ğ½ÑƒÑ‚

4. **Ğ ĞµĞ³ÑƒĞ»ÑÑ‚Ğ¾Ñ€Ğ½Ğ¾Ğµ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ:**
   - âœ… ICH-GCP compliant
   - âœ… FDA 21 CFR compliant
   - âœ… EMA guidelines compliant
   - âœ… Audit-ready (traceable sources)

---

## ğŸ“Š MONITORING & METRICS

### ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ:

```typescript
interface GenerationMetrics {
  // Data usage
  dataUsage: {
    knowledgeGraph: number // % used
    clinicalTrials: number
    safetyReports: number
    fdaLabels: number
    literature: number
    ragReferences: number
  }
  
  // Quality
  quality: {
    placeholders: number
    hallucinations: number
    citations: number
    completeness: number // % of required subsections
  }
  
  // Performance
  performance: {
    generationTime: number // seconds
    tokensUsed: number
    tokensTarget: number
    pagesGenerated: number
  }
  
  // Compliance
  compliance: {
    ichGcpCompliant: boolean
    fdaCompliant: boolean
    emaCompliant: boolean
    auditReady: boolean
  }
}
```

---

**Ğ“ĞĞ¢ĞĞ’Ğ Ğš Ğ Ğ•ĞĞ›Ğ˜Ğ—ĞĞ¦Ğ˜Ğ˜!**

ĞĞ°Ñ‡Ğ¸Ğ½Ğ°ĞµĞ¼ Ñ Phase 1, Day 1?
